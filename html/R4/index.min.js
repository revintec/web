(function(){function l(a){a.preventDefault();a=a.changedTouches;if(1!=a.length)throw alert("nativeTS: cluttered events!"),"IllegalStateException";a=a[0];a.offsetX=a.pageX-m.offsetLeft;a.offsetY=a.pageY-m.offsetTop;return a}var d={FPS:30,scale:3,bundle:77,tolerate:3,tileX:500,tileY:295,tiles:10};(function(a){a.width=d.tileX+"px";a.height=d.tileY+"px"})(document.querySelector("div.ContainerMain").style);var b={length:0},f=document.querySelector("div.TargetTest"),g=document.querySelector("div.ViewMain");
(function(a){a.backgroundSize=d.tileX*d.tiles+"px";var c=new Image;c.onload=function(){setTimeout(function(){a.backgroundImage="url("+c.src+")"},3E3)};c.src="image-hd.bin"})(g.style);var h=function(a,c){var b=-1;return function(e){if(void 0===e)return b;e=(e+36E4)%360;if(e!=b){b=e;var d=parseInt(c.bundle*b/360);e=d%c.tiles;d=parseInt(d/c.tiles);a.style.backgroundPosition="-"+e*c.tileX+"px -"+d*c.tileY+"px";e=b;80<e&&350>e?f.style.display="none":(f.style.display="block",e=180-256*Math.cos((140-e+360)%
360*Math.PI/180),f.style.left=e-f.offsetWidth/2,f.style.top=134-f.offsetHeight/2)}}}(g,d);setInterval(function(){b.length?k=-8:5>k&&(k+=0.1);0<k&&h(h()+k)},parseInt(1E3/d.FPS));h(0);var k=-3,m=document.querySelector("div.ContainerMain");g.addEventListener("touchstart",function(a){a=l(a);b[a.identifier]={moved:!1,x:a.clientX,rt:h(),atx:0};++b.length});g.addEventListener("touchmove",function(a){a=l(a);var c=(a.clientX-b[a.identifier].x)/d.scale;h(b[a.identifier].rt-c);b[a.identifier].atx+Math.abs(c)>=
d.tolerate&&(b[a.identifier].moved=!0)});g.addEventListener("touchend",function(a){a=l(a);if(!b[a.identifier].moved){var c=h();console.info(c,a.offsetX,a.offsetY)}delete b[a.identifier];--b.length});g.addEventListener("touchcancel",function(a){a=l(a);delete b[a.identifier];--b.length});f.addEventListener("click",function(){alert("Shit!")})})();
